# 定义模板

## 模板实质

### 一个模板就是一个创建类或函数的蓝图或者公式。比如vector泛型类型或者find这样的泛型函数。提供足够的信息将蓝图转换为特定的类或函数

## 函数模板

### 函数模板

- 作用

	- 比如一个比较函数，如果int类型和dobule类型定义不同的函数重载，会导致代码冗余且复杂。这个时候就可以定义一个函数模板即可

- 原理

	- 模板函数会在编译的时候根据模板实参类型进行实例化，实例化对应模板实参类型的函数。

### 模板参数

- 模板作为模板函数的参数类型
- 模板也可以提供模板模板实参

### 非类型模板参数

- 模板不是表示一个类型而是一个值或者常量表达式

### 编写与类型无关函数（泛型函数）准则

- 模板中的函数参数是const引用

	- 避免泛型函数中参数传进来是不能拷贝的类型时（unique_ptr和IO类型）出现问题

- 函数体重的条件判断仅适用<比较运算

	- 只适用<降低了函数要处理类型的要求，只需要这些类型支持<运算符号即可

## 类模板

### 就是实例化具体类的蓝图类

### 注意

- 一个实例化了的类模板，其成员只有在使用的时候才会被实例化，并不是类实例化的时候就全部实例化

### 成员模板

- 类（模板类和非模板类都可以）中包含本身是模板的成员函数，这种成员就是成员模板。成员模板不能是虚函数
- 如果是在模板类里面添加成员模板，那个这个成员模板的模板是独立的和模板类的模板不一样

## 控制实例化

### 默认使用时实例化模板可能存在问题

- 如果两个或多个源文件中使用了相同的模板，并提供了相同的模板参数时，在多个文件中实例化相同的模板造成的开销可能会比较大

### 解决方法

- 可以通过显示实例化解决

	- 实例化声明（可以有多个）

		- extern template 类或函数声明

	- 实例化定义（只能有一个）

		- template 类或函数声明

*XMind - Trial Version*